version: 3
workdir: .
allow:
    depOnAnyVendor: false 
    deepScan: true


excludeFiles:
  - "^.*_test\\.go$"
  - "^.*\\/test\\/.*$"

vendors:
    3rd-cobra:
        in: github.com/spf13/cobra
    3rd-cue:
        in: ['cuelang.org/go/cue', 'cuelang.org/go/cue/**']
    3rd-yaml:
        in: gopkg.in/yaml.v3

components:
    Domain:
        in: ['internal/domain/**'] 
    
    Service:
        in: ['internal/service/**']

    CLI:
        in: ['cmd/**']

    Templates:
        in: ['templates/**']

    Util:
        in: ['internal/util/**']

    TestUtil:
        in: ['internal/testutil/**']

deps:
    Domain:
        mayDependOn: [Domain, Util] 
        canUse: []
        anyVendorDeps: true

    Service:
        mayDependOn: [Domain, Util, Templates]
        canUse: [3rd-cue, 3rd-yaml]

    CLI:
        mayDependOn: [CLI, Domain, Service, Util] 
        canUse: [3rd-cobra]

    Templates:
        mayDependOn: []
        canUse: []
        anyProjectDeps: true

    Util:
        mayDependOn: []
        canUse: []
        anyVendorDeps: true

    TestUtil:
        mayDependOn: []
        canUse: []
        anyVendorDeps: true